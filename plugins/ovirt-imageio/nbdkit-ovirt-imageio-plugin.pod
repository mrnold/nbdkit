=head1 NAME

nbdkit-ovirt-imageio-plugin - nbdkit plugin for oVirt ImageIO

=head1 SYNOPSIS

 nbdkit -r ovirt-imageio [url=]http://example.com/ testvm-disk1

=head1 DESCRIPTION

C<nbdkit-ovirt-imageio-plugin> is a plugin for L<nbdkit(1)> which
enables direct access to one disk of a VM running on oVirt or RHEV.
This uses S<C<curl -V>> to access the ImageIO API.

=head1 EXAMPLE

 nbdkit -r curl http://example.com/disk.img

serves the remote disk image as NBD on TCP port 10809 (to control
ports and protocols used to serve NBD see L<nbdkit(1)>).

=head1 PARAMETERS

=over 4

=item B<password=>PASSWORD

Set the password to use when connecting to the remote server.

Note that passing this on the command line is not secure on shared
machines.

=item B<password=->

Ask for the password (interactively) when nbdkit starts up.

=item B<password=+>FILENAME

Read the password from the named file.  This is a secure method
to supply a password, as long as you set the permissions on the file
appropriately.

=item B<password=->FD

Read the password from file descriptor number C<FD>, inherited from
the parent process when nbdkit starts up.  This is also a secure
method to supply a password.

=item B<sslverify=false>

Don't verify the SSL certificate of the remote host.

=item B<timeout=>SECS

Set the timeout for requests.

=item B<timeout=0>

Use the default libcurl timeout for requests.

=item B<unix-socket-path=>PATH

Instead of using a TCP connection, connect to the server over the
named Unix domain socket.  See
L<curl_easy_setopt(3)/CURLOPT_UNIX_SOCKET_PATH>.

=item [B<url=>]URL

The URL of the oVirt/RHEV management engine.

This parameter is required.

C<url=> is a magic config key and may be omitted in most cases.
See L<nbdkit(1)/Magic parameters>.

=item B<user=>USERNAME

Set the username to use when connecting to the remote server.  This
may also be set in the URL (eg. C<http://foo@example.com/disk.img>)

=back

=head1 DEBUG FLAG

=over 4

=item B<-D curl.verbose=1>

This enables very verbose curl debugging.  See L<CURLOPT_VERBOSE(3)>.
This is mainly useful if you suspect there is a bug inside libcurl
itself.

=back

=head1 FILES

=over 4

=item F<$plugindir/nbdkit-ovirt-imageio-plugin.so>

The plugin.

Use C<nbdkit --dump-config> to find the location of C<$plugindir>.

=back

=head1 VERSION

C<nbdkit-ovirt-imageio-plugin> is not yet present in nbdkit.

=head1 SEE ALSO

L<curl(1)>,
L<libcurl(3)>,
L<CURLOPT_COOKIE(3)>
L<CURLOPT_VERBOSE(3)>,
L<nbdkit(1)>,
L<nbdkit-readahead-filter(1)>,
L<nbdkit-retry-filter(1)>,
L<nbdkit-ssh-plugin(1)>,
L<nbdkit-plugin(3)>,
L<ovirt>,
L<http://curl.haxx.se>.

=head1 AUTHORS

Red Hat, Inc.
Parts derived from Richard W.M. Jones' curl plugin; parts of that
derived from Alexander Graf's "QEMU Block driver for CURL images".

=head1 COPYRIGHT

Copyright (C) 2019 Red Hat Inc.
